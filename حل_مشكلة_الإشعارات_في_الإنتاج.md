# ๐ ุญู ูุดููุฉ ุงูุฅุดุนุงุฑุงุช ูู ุงูุฅูุชุงุฌ

## ๐ ููุฎุต ุงููุดููุฉ
ุงูุฅุดุนุงุฑุงุช ุชุนูู ูู **Expo Go** ููู ูุง ุชุนูู ูู **Production Build** (APK).

## โ ุงูุชุนุฏููุงุช ุงูุชู ุชู ุชุทุจูููุง

### 1. ุชุญุฏูุซ `mobile/src/services/notificationService.ts`
- ุงุณุชุฎุฏุงู `projectId` ุงูุซุงุจุช ูุจุงุดุฑุฉ ุจุฏูุงู ูู ุงูุงุนุชูุงุฏ ุนูู `Constants.expoConfig`
- ุฅุถุงูุฉ ูุนูููุงุช ุฃูุซุฑ ุชูุตููุงู ูู logs ุงูุฃุฎุทุงุก

### 2. ุชุญุฏูุซ `mobile/App.tsx`
- ุฅุถุงูุฉ ุทูุจ ุตุฑูุญ ููุฃุฐููุงุช ุนูู Android 13+
- ุฅุถุงูุฉ ุชูุจููุงุช ูููุณุชุฎุฏู ูู ุญุงูุฉ ูุดู ุงูุญุตูู ุนูู ุงูุชููู
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 3. ุชุญุฏูุซ `mobile/app.json`
- ุฅุถุงูุฉ ุฃุฐููุงุช ุฅุถุงููุฉ: `SCHEDULE_EXACT_ALARM`, `USE_EXACT_ALARM`
- ุชูุนูู `useNextNotificationsApi: true`
- ุฑูุน `versionCode` ุฅูู 3

### 4. ุฅูุดุงุก ูููุงุช ุชูุซูู
- `mobile/PRODUCTION_NOTIFICATIONS_FIX.md`: ุฏููู ุดุงูู ููุญููู
- `mobile/TEST_NOTIFICATIONS.md`: ุฏููู ุงูุงุฎุชุจุงุฑ
- `server/test-push-notification.js`: ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุจูุงุก APK ุฌุฏูุฏ
```bash
cd mobile
eas build --platform android --profile production
```

### 2. ุชุซุจูุช ูุงุฎุชุจุงุฑ
1. ูู ุจุชูุฒูู APK ูู EAS Build
2. ุซุจุชู ุนูู ุฌูุงุฒ Android ุญูููู
3. ุณุฌู ุฏุฎูู ุจุญุณุงุจู
4. ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ "Push token registered with server"

### 3. ุงูุชุญูู ูู ุชุณุฌูู Token
ุงูุชุญ ุงููุชุตูุญ:
```
https://ict-ai-trader-production.up.railway.app/api/auth/list-push-tokens
```

### 4. ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ
ุงุณุชุฎุฏู Expo Push Tool:
```
https://expo.dev/notifications
```

ุฃู ุงุณุชุฎุฏู ุงูุณูุฑูุจุช:
```bash
cd server
node test-push-notification.js ExponentPushToken[YOUR_TOKEN]
```

---

## ๐ ุงูุฃุณุจุงุจ ุงููุญุชููุฉ ูููุดููุฉ

### ุงูุณุจุจ ุงูุฑุฆูุณู ุงููุญุชูู:
**Firebase Cloud Messaging (FCM) ุบูุฑ ููุนู ุจุดูู ุตุญูุญ**

#### ุงูุญู:
1. ุงูุชุญ [Firebase Console](https://console.firebase.google.com/)
2. ุงุฎุชุฑ ูุดุฑูุนู: `aaaaaa-34f8a`
3. ุงุฐูุจ ุฅูู **Project Settings** > **Cloud Messaging**
4. ุชุฃูุฏ ูู ุชูุนูู **Cloud Messaging API (Legacy)**
5. ุฅุฐุง ูุงู ูุนุทูุ ูู ุจุชูุนููู

### ุฃุณุจุงุจ ุฃุฎุฑู ูุญุชููุฉ:

#### 1. ูุดููุฉ ูู `google-services.json`
- ุชุฃูุฏ ูู ุฃู ุงูููู ุตุญูุญ ููุทุงุจู ูู package name
- Package name: `com.ictaitrader.app`

#### 2. ูุดููุฉ ูู ุงูุฃุฐููุงุช (Android 13+)
- ุชู ุฅุถุงูุฉ ุทูุจ ุตุฑูุญ ููุฃุฐููุงุช ูู ุงูููุฏ ุงูุฌุฏูุฏ
- ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุงูููุงููุฉ ุนูู ุงูุฃุฐููุงุช

#### 3. Battery Optimization
- ุจุนุถ ุงูุฃุฌูุฒุฉ ุชุญุชุงุฌ ุชุนุทูู Battery Optimization ููุชุทุจูู
- ุฎุงุตุฉ Xiaomi, Huawei, Oppo

---

## ๐ Checklist ููุชุฃูุฏ

- [x] ุชุญุฏูุซ `notificationService.ts` - ุงุณุชุฎุฏุงู projectId ุซุงุจุช
- [x] ุชุญุฏูุซ `App.tsx` - ุทูุจ ุฃุฐููุงุช ุตุฑูุญ
- [x] ุชุญุฏูุซ `app.json` - ุฃุฐููุงุช ุฅุถุงููุฉ
- [x] ุฅูุดุงุก ูููุงุช ุงูุชูุซูู
- [ ] ุจูุงุก APK ุฌุฏูุฏ
- [ ] ุงุฎุชุจุงุฑ ุนูู ุฌูุงุฒ ุญูููู
- [ ] ุงูุชุญูู ูู Firebase Console
- [ ] ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฅุดุนุงุฑ

---

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุฅุตูุงุญุงุช:
- โ ุงูุฅุดุนุงุฑุงุช ุชุนูู ูู Production Build
- โ ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู
- โ ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุนูุฏ ููู ุงูุดุงุดุฉ
- โ ุงูุฅุดุนุงุฑุงุช ุชุตุฏุฑ ุตูุช
- โ ุงูููุฑ ุนูู ุงูุฅุดุนุงุฑ ููุชุญ ุงูุชุทุจูู

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### 1. ุชุญูู ูู Firebase Console
- ุชุฃูุฏ ูู ุชูุนูู Cloud Messaging API
- ุฑุงุฌุน Sent Messages ูู Firebase

### 2. ุชุญูู ูู Railway Logs
```bash
# ูู Railway Dashboard
# ุงุฐูุจ ุฅูู Deployments > View Logs
# ุงุจุญุซ ุนู "Push notification" ุฃู "Expo"
```

### 3. ุชุญูู ูู Android Logs
```bash
adb logcat | grep -i "expo\|notification\|push"
```

### 4. ุงุฎุชุจุฑ ุจุงุณุชุฎุฏุงู Expo Tool
- ุงุฐูุจ ุฅูู: https://expo.dev/notifications
- ุงูุตู push token
- ุฃุฑุณู ุฅุดุนุงุฑ ุชุฌุฑูุจู
- ุฅุฐุง ูุตูุ ุงููุดููุฉ ูู ุงูุณูุฑูุฑ
- ุฅุฐุง ูู ูุตูุ ุงููุดููุฉ ูู ุงูุชุทุจูู/Firebase

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงููุฑู ุจูู Expo Go ูุงูุฅูุชุงุฌ:
- **Expo Go**: ูุณุชุฎุฏู ุฎูุงุฏู Expo ูุจุงุดุฑุฉ (ูุง ูุญุชุงุฌ FCM)
- **Production**: ูุณุชุฎุฏู FCM (Firebase Cloud Messaging)
- ูุฐูู ูุฌุจ ุชูุนูู FCM ููุฅูุชุงุฌ

### Android 13+:
- ูุชุทูุจ ุฅุฐู `POST_NOTIFICATIONS` ุจุดูู ุตุฑูุญ
- ุชู ุฅุถุงูุฉ ุงูููุฏ ูุทูุจ ุงูุฅุฐู ุชููุงุฆูุงู

### ุฃุฌูุฒุฉ ูุนููุฉ:
- **Xiaomi**: Settings > Battery > App battery saver > Your App > No restrictions
- **Huawei**: Settings > Battery > App launch > Your App > Manage manually
- **Oppo**: Settings > Battery > Power saving mode > Your App > Allow background activity

---

## ๐ง ุฃุฏูุงุช ูููุฏุฉ

### 1. Expo Push Notification Tool
https://expo.dev/notifications

### 2. Firebase Console
https://console.firebase.google.com/

### 3. Railway Dashboard
https://railway.app/dashboard

### 4. EAS Build
https://expo.dev/accounts/[your-account]/projects/ict-ai-trader/builds

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุช ุงููุงุฒูุฉ ูุญู ูุดููุฉ ุงูุฅุดุนุงุฑุงุช ูู ุงูุฅูุชุงุฌ. ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู:

1. **ุจูุงุก APK ุฌุฏูุฏ** ุจุงุณุชุฎุฏุงู `eas build`
2. **ุงุฎุชุจุงุฑ ุนูู ุฌูุงุฒ ุญูููู**
3. **ุงูุชุญูู ูู Firebase Console** (ุงูุฃูู!)
4. **ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฅุดุนุงุฑ**

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุงูุชุฃูุฏ ูู ุชูุนูู FCM ูู Firebaseุ ูุฑุฌู ูุฑุงุฌุนุฉ ููู `PRODUCTION_NOTIFICATIONS_FIX.md` ููุญููู ุงูุฅุถุงููุฉ.
