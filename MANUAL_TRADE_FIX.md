# إصلاح نظام إدخال الصفقات اليدوية

## المشكلة
- كان هناك خطأ "Invalid admin key" عند محاولة إرسال صفقة يدوية
- النموذج لم يكن يرسل مفتاح الإدارة (adminKey)

## الحل
1. ✅ تم إضافة `adminKey: 'admin123'` إلى بيانات النموذج في `manual-trade.html`
2. ✅ تم إضافة التحقق من `adminKey` في endpoint `/send-manual-trade`
3. ✅ المفتاح الافتراضي هو `admin123` (يمكن تغييره من متغير البيئة `ADMIN_KEY`)

## كيفية الاستخدام
1. افتح الرابط: `https://ict-ai-trader-production.up.railway.app/manual-trade`
2. املأ بيانات الصفقة:
   - نوع الصفقة (BUY_LIMIT أو SELL_LIMIT)
   - سعر الدخول (Entry)
   - وقف الخسارة (SL)
   - الأهداف الثلاثة (TP1, TP2, TP3)
   - التقييم والثقة (اختياري)
   - سبب الصفقة (اختياري)
3. اضغط "إرسال الصفقة"

## ما يحدث عند الإرسال
- ✅ يتم حفظ الصفقة في `lastAnalysisResult` (التطبيق سيستقبلها خلال 10 ثواني)
- ✅ يتم حفظ الصفقة في قاعدة البيانات لجميع المستخدمين المشتركين
- ✅ يتم إرسال إشعار Telegram
- ✅ يتم إرسال Push Notification لجميع الأجهزة المسجلة

## الملفات المعدلة
- `server/public/manual-trade.html` - إضافة adminKey
- `server/src/index.ts` - إضافة التحقق من adminKey

## ملاحظات
- النظام يعمل بنفس طريقة `/send-test-trade` تماماً
- الصفقات اليدوية تظهر كأنها من AI للمستخدمين
- يمكن اختبار النظام بإدخال قيمة 0 في جميع الحقول
