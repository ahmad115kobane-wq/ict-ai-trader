# ๐ ุฅุนุฏุงุฏ ุฎุฏูุฉ ุงูุนูู ูู ุงูุฎูููุฉ

## โ ุชู ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ:

### 1๏ธโฃ Background Fetch (ุงูุนูู ูู ุงูุฎูููุฉ)
- โ ุงูุชุทุจูู ูุนูู ูู ุงูุฎูููุฉ ุญุชู ุจุนุฏ ุฅุบูุงูู
- โ ูุชุญูู ูู ุงูุชุญูููุงุช ุงูุฌุฏูุฏุฉ ูู 15 ุฏูููุฉ
- โ ูุฑุณู ุฅุดุนุงุฑุงุช ุชููุงุฆูุงู
- โ ูุณุชูุฑ ุญุชู ุจุนุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ

### 2๏ธโฃ Network Monitoring (ูุฑุงูุจุฉ ุงูุงุชุตุงู)
- โ ูุฑุงูุจ ุญุงูุฉ ุงูุฅูุชุฑูุช ุจุงุณุชูุฑุงุฑ
- โ ููุชุดู ุงููุทุงุน ุงูุงุชุตุงู ููุฑุงู
- โ ููุชุดู ุนูุฏุฉ ุงูุงุชุตุงู ููุฑุงู
- โ ูุฒุงูู ุงูุจูุงูุงุช ุชููุงุฆูุงู ุนูุฏ ุนูุฏุฉ ุงููุช

### 3๏ธโฃ Auto Reconnect (ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู)
- โ ุนูุฏ ุนูุฏุฉ ุงููุชุ ูุฌูุจ ุงูุชุญูููุงุช ุงููุงุฆุชุฉ
- โ ูุฑุณู ุงูุฅุดุนุงุฑุงุช ุงููุนููุฉ
- โ ูุญุฏูุซ ุงูุจูุงูุงุช ุชููุงุฆูุงู
- โ ูู ุดูุก ูุนูู ุจุฏูู ุชุฏุฎู ุงููุณุชุฎุฏู

---

## ๐ฆ ุงูููุชุจุงุช ุงููุถุงูุฉ:

```json
{
  "expo-background-fetch": "~13.0.6",
  "expo-task-manager": "~12.0.6",
  "@react-native-community/netinfo": "^11.3.0"
}
```

---

## ๐ง ุงูุชุซุจูุช:

### 1. ุชุซุจูุช ุงูููุชุจุงุช:
```bash
cd mobile
npm install
```

### 2. ุฅุนุงุฏุฉ ุจูุงุก ุงูุชุทุจูู:
```bash
# ููุฃูุฏุฑููุฏ:
npx expo run:android

# ููู iOS:
npx expo run:ios
```

---

## ๐ฑ ููููุฉ ุงูุงุณุชุฎุฏุงู:

### ูู DashboardScreen:

```typescript
import { 
  registerBackgroundFetch, 
  startNetworkMonitoring,
  forceSyncNow 
} from '../services/backgroundService';

// ุนูุฏ ุชุญููู ุงูุดุงุดุฉ
useEffect(() => {
  // ุชูุนูู ุงูุนูู ูู ุงูุฎูููุฉ
  registerBackgroundFetch();
  
  // ุชูุนูู ูุฑุงูุจุฉ ุงูุงุชุตุงู
  startNetworkMonitoring(() => {
    console.log('โ Internet reconnected!');
    // ุชุญุฏูุซ ุงูุจูุงูุงุช
    fetchUserData();
    fetchAnalysisHistory();
  });
}, []);
```

---

## ๐ฏ ุงูุณููุงุฑูููุงุช:

### ุงูุณููุงุฑูู 1: ุงูุชุทุจูู ูุบูู
```
1. ุงููุณุชุฎุฏู ูุบูู ุงูุชุทุจูู
2. Background Fetch ูุนูู ูู 15 ุฏูููุฉ
3. ูุชุญูู ูู ุงูุชุญูููุงุช ุงูุฌุฏูุฏุฉ
4. ูุฑุณู ุฅุดุนุงุฑุงุช ุนูุฏ ูุฌูุฏ ุตููุงุช
```

### ุงูุณููุงุฑูู 2: ุงููุทุงุน ุงููุช
```
1. ุงููุช ูููุทุน
2. Network Monitor ููุชุดู ุงูุงููุทุงุน
3. ูุญูุธ ุงูุญุงูุฉ
4. ุงููุช ูุนูุฏ
5. Network Monitor ููุชุดู ุงูุนูุฏุฉ ููุฑุงู
6. ูุฌูุจ ุงูุชุญูููุงุช ุงููุงุฆุชุฉ
7. ูุฑุณู ุงูุฅุดุนุงุฑุงุช ุงููุนููุฉ
```

### ุงูุณููุงุฑูู 3: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ
```
1. ุงูุฌูุงุฒ ููุนุงุฏ ุชุดุบููู
2. Background Fetch ูุจุฏุฃ ุชููุงุฆูุงู (startOnBoot: true)
3. ูุณุชุฃูู ุงูุนูู ุจุดูู ุทุจูุนู
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช:

### ุชุฎุตูุต ูุชุฑุฉ ุงูุชุญูู:
```typescript
const SYNC_INTERVAL = 15 * 60; // 15 ุฏูููุฉ (ุงูุงูุชุฑุงุถู)

// ูููู ุชุบููุฑูุง ุฅูู:
const SYNC_INTERVAL = 5 * 60;  // 5 ุฏูุงุฆู (ุฃุณุฑุน)
const SYNC_INTERVAL = 30 * 60; // 30 ุฏูููุฉ (ุฃุจุทุฃุ ูููุฑ ุจุทุงุฑูุฉ)
```

---

## ๐ ุงุณุชููุงู ุงูุจุทุงุฑูุฉ:

### ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ (15 ุฏูููุฉ):
- โ ุงุณุชููุงู ููุฎูุถ ุฌุฏุงู (~1-2% ููููุงู)
- โ ุงููุธุงู ูุฏูุฑ ุงูููุงุฑุฏ ุจุฐูุงุก
- โ ูุง ูุนูู ุฅุฐุง ูุงูุช ุงูุจุทุงุฑูุฉ ููุฎูุถุฉ

### ูุตุงุฆุญ ูุชูููุฑ ุงูุจุทุงุฑูุฉ:
1. ุฒูุงุฏุฉ SYNC_INTERVAL ุฅูู 30 ุฏูููุฉ
2. ุชุนุทูู ุงูููุฒุฉ ุนูุฏ ุนุฏู ุงูุญุงุฌุฉ
3. ุงูุงุนุชูุงุฏ ุนูู ุงูุฅุดุนุงุฑุงุช ูู ุงูุณูุฑูุฑ ููุท

---

## ๐งช ุงูุงุฎุชุจุงุฑ:

### 1. ุงุฎุชุจุงุฑ Background Fetch:
```typescript
// ูู DashboardScreen
<TouchableOpacity onPress={async () => {
  await forceSyncNow();
  alert('ุชู ุงููุฒุงููุฉ!');
}}>
  <Text>๐ ูุฒุงููุฉ ุงูุขู</Text>
</TouchableOpacity>
```

### 2. ุงุฎุชุจุงุฑ Network Monitoring:
```
1. ุงูุชุญ ุงูุชุทุจูู
2. ูุนูู ูุถุน ุงูุทูุฑุงู
3. ุงูุชุธุฑ 5 ุซูุงูู
4. ุฃููู ูุถุน ุงูุทูุฑุงู
5. ูุฌุจ ุฃู ุชุฑู: "โ Internet reconnected!"
```

---

## ๐ Logs ูููุฑุงูุจุฉ:

```
๐ Background task: Checking for new analysis...
โ New analysis found in background: PLACE_PENDING
๐ฑ Background notification sent

๐ Network state changed: { isConnected: false }
โ Internet disconnected

๐ Network state changed: { isConnected: true }
โ Internet reconnected!
๐ Executing reconnect callback...
๐ Syncing data after reconnection...
โ Synced latest analysis: PLACE_PENDING
๐ฑ Reconnect notification sent
```

---

## โ๏ธ ุงููููุฏ:

### iOS:
- Background Fetch ูุฏ ูุชุฃุฎุฑ (ูุนุชูุฏ ุนูู ุงููุธุงู)
- ุงูุญุฏ ุงูุฃุฏูู: 15 ุฏูููุฉ
- ูุฏ ูุง ูุนูู ุฅุฐุง ูุงูุช ุงูุจุทุงุฑูุฉ ููุฎูุถุฉ

### Android:
- ุฃูุซุฑ ููุซูููุฉ ูู iOS
- ูุนูู ุจุดูู ุฃูุถู ูุน Doze Mode
- ูุฏ ูุชุทูุจ ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ ูุจุนุถ ุงูุฃุฌูุฒุฉ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

โ ุงูุชุทุจูู ูุนูู ูู ุงูุฎูููุฉ
โ ูุณุชูุจู ุงูุฅุดุนุงุฑุงุช ุญุชู ุจุนุฏ ุงูุฅุบูุงู
โ ููุชุดู ุงููุทุงุน ูุนูุฏุฉ ุงููุช
โ ูุฒุงูู ุงูุจูุงูุงุช ุชููุงุฆูุงู
โ ูุง ูุญุชุงุฌ ุชุฏุฎู ุงููุณุชุฎุฏู
โ ุงุณุชููุงู ุจุทุงุฑูุฉ ููุฎูุถ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. โ ุชุซุจูุช ุงูููุชุจุงุช: `npm install`
2. โ ุฏูุฌ ุงูุฎุฏูุฉ ูู DashboardScreen
3. โ ุงุฎุชุจุงุฑ ุนูู ุฌูุงุฒ ุญูููู (ููุณ ูุญุงูู)
4. โ ูุฑุงูุจุฉ ุงูู logs
5. โ ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ุญุณุจ ุงูุญุงุฌุฉ

---

**ููุงุญุธุฉ**: ูุฐู ุงูููุฒุงุช ุชุนูู ุจุดูู ุฃูุถู ุนูู **ุฃุฌูุฒุฉ ุญููููุฉ**ุ ูููุณ ุนูู ุงููุญุงูู!
